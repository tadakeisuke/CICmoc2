# 地域指標マップ機能追加 設計・実装方針

## 1. データ設計

- 各地域（町ごと）に「指標」データを追加
- 例：電気代、ガス代、水道代、地代、治安など
- データ形式（JSON例）  
  ```json
  {
    "name": "一番町",
    "metrics": {
      "electricity": 12000,
      "gas": 8000,
      "water": 5000,
      "land": 20000,
      "security": 4.5
    }
  }
  ```

## 2. UI設計

- サイドバーに「指標選択ボタン」を追加
  - 例：「電気代」「ガス代」「水道代」「地代」「治安」など
- 選択した指標で地図の色分けを切り替え
- 地域をクリックすると、その地域の指標値をポップアップ表示

## 3. 色分け・可視化方針

- 各指標ごとに色を決める（例：電気代は黄色、治安は赤など）
- 指標値の大小で色の濃さや透明度を変える
  - 例：電気代が高いほど濃い黄色、治安が悪いほど濃い赤

## 4. 実装方針

1. **データ拡張**
   - 既存の地域データに `metrics` オブジェクトを追加

2. **状態管理**
   - 「今どの指標を表示しているか」を管理する変数（例：`selectedMetric`）

3. **UI操作**
   - サイドバーのボタンで `selectedMetric` を切り替え
   - 切り替え時に地図の色分けを再描画

4. **地図描画ロジック**
   - `selectedMetric` に応じて各地域の色・濃さを決定
   - Leaflet等の地図ライブラリでポリゴンの色を設定

5. **ポップアップ表示**
   - 地域をクリックしたとき、選択中の指標値を含めて表示

## 5. 拡張性・今後の展望

- 指標の種類は後から追加・変更しやすい設計にする
- データは外部ファイルやAPIから取得することも可能
- グラフやランキング表示など、さらなる可視化も検討可能

---

## まとめ

- データ構造を拡張し、指標値を持たせる
- UIで指標を選択できるようにする
- 選択した指標で地図の色分けを切り替える
- 地域ごとの詳細情報も分かりやすく表示

この設計方針をベースに、実装やレビューを進めていくのが良いでしょう。
ご質問や追加要望があれば、さらに具体化していきますのでご相談ください。
